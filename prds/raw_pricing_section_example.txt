// components/PricingSection.js
// Make sure you have Tailwind CSS configured in your Next.js project.

import React from 'react';
import { CheckCircle, XCircle, Zap, DollarSign, ShieldCheck, Repeat } from 'lucide-react'; // Using lucide-react for icons

// Helper component for feature list items
const FeatureListItem = ({ text, included }) => (
  <li className="flex items-center space-x-3">
    {included ? (
      <CheckCircle className="flex-shrink-0 w-5 h-5 text-green-500" />
    ) : (
      <XCircle className="flex-shrink-0 w-5 h-5 text-red-500" />
    )}
    <span>{text}</span>
  </li>
);

const PricingSection = () => {
  // Placeholder function for handling subscription.
  // In a real app, this would redirect to Stripe Checkout or call your backend.
  const handleSubscription = (tier) => {
    console.log(`Subscribing to ${tier} tier`);
    // Example: router.push('/api/checkout_sessions?plan=...');
    // Or, if using Stripe.js client-side:
    // stripe.redirectToCheckout({ sessionId: 'YOUR_SESSION_ID' });
    alert(`Button clicked for ${tier} tier. Implement Stripe checkout here.`);
  };

  return (
    <section className="bg-gradient-to-b from-slate-900 to-slate-800 text-white py-12 md:py-20 font-inter">
      <div className="container mx-auto px-4 sm:px-6 lg:px-8">
        <div className="text-center mb-10 md:mb-16">
          <h2 className="text-3xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight">
            Find the Perfect Plan
          </h2>
          <p className="mt-4 text-lg sm:text-xl text-slate-400 max-w-2xl mx-auto">
            Start for free, or unlock powerful features with our Pro plan. No hidden fees, transparent pricing.
          </p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-4xl mx-auto items-stretch">
          {/* Free Tier Card */}
          <div className="bg-slate-800/70 backdrop-blur-md p-6 sm:p-8 rounded-xl shadow-2xl border border-slate-700 flex flex-col">
            <div className="flex-grow">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-2xl sm:text-3xl font-semibold text-sky-400">Free Tier</h3>
                <Zap className="w-8 h-8 text-sky-400" />
              </div>
              <p className="text-4xl sm:text-5xl font-bold mb-1">$0<span className="text-lg font-normal text-slate-400">/month</span></p>
              <p className="text-slate-400 mb-6">Perfect for getting started and personal projects.</p>

              <ul className="space-y-3 text-slate-300 mb-8">
                <FeatureListItem text="Up to 10 documents" included={true} />
                <FeatureListItem text="Up to 25 messages per document" included={true} />
                <FeatureListItem text="Basic support" included={true} />
                <FeatureListItem text="Unlimited messages" included={false} />
                <FeatureListItem text="Unlimited documents" included={false} />
                <FeatureListItem text="Priority support" included={false} />
              </ul>
            </div>
            <button
              onClick={() => handleSubscription('Free')}
              className="w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-3 px-6 rounded-lg text-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-opacity-75"
            >
              Get Started for Free
            </button>
          </div>

          {/* Paid Tier Card - Highlighted */}
          <div className="bg-indigo-600/80 backdrop-blur-md p-6 sm:p-8 rounded-xl shadow-2xl border border-indigo-500 ring-2 ring-indigo-400 flex flex-col relative overflow-hidden">
            <div className="absolute top-0 right-0 -mt-4 -mr-4 bg-yellow-400 text-yellow-900 text-xs font-bold uppercase tracking-wider px-3 py-1 rounded-full shadow-md">
              Best Value
            </div>
            <div className="flex-grow">
              <div className="flex items-center justify-between mb-4">
                 <h3 className="text-2xl sm:text-3xl font-semibold text-yellow-300">Pro Tier</h3>
                 <ShieldCheck className="w-8 h-8 text-yellow-300" />
              </div>

              {/* Pricing Options for Paid Tier */}
              <div className="mb-6">
                <div className="bg-indigo-700/50 p-4 rounded-lg mb-3">
                  <p className="text-4xl sm:text-5xl font-bold text-white">
                    $15<span className="text-lg font-normal text-indigo-200">/month</span>
                  </p>
                  <p className="text-indigo-200 text-sm">Billed annually ($180/year)</p>
                </div>
                <div className="bg-indigo-700/30 p-4 rounded-lg">
                  <p className="text-3xl sm:text-4xl font-bold text-white">
                    $18<span className="text-lg font-normal text-indigo-200">/month</span>
                  </p>
                  <p className="text-indigo-200 text-sm">Billed month-to-month</p>
                </div>
              </div>

              <p className="text-indigo-200 mb-6">For professionals and teams who need unlimited access and premium features.</p>

              <ul className="space-y-3 text-indigo-100 mb-8">
                <FeatureListItem text="Unlimited documents" included={true} />
                <FeatureListItem text="Unlimited messages per document" included={true} />
                <FeatureListItem text="Priority email support" included={true} />
                <FeatureListItem text="Access to all Pro features" included={true} />
                <FeatureListItem text="Early access to new features" included={true} />
              </ul>
            </div>
            <button
              onClick={() => handleSubscription('Paid')}
              className="w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-semibold py-3 px-6 rounded-lg text-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-yellow-300 focus:ring-opacity-75"
            >
              Upgrade to Pro
            </button>
             <p className="text-center text-xs text-indigo-200 mt-4">
                You can upgrade, downgrade, or cancel anytime.
             </p>
          </div>
        </div>

        {/* Comparison Table (Optional - for more detailed feature breakdown) */}
        {/* You can add a more detailed comparison table here if needed */}
        <div className="mt-16 text-center">
            <h3 className="text-xl font-semibold mb-6 text-slate-300">Feature Comparison</h3>
            <div className="overflow-x-auto">
                <table className="min-w-full bg-slate-800/50 rounded-lg shadow">
                    <thead className="bg-slate-700/50">
                        <tr>
                            <th className="py-3 px-4 sm:px-6 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">Feature</th>
                            <th className="py-3 px-4 sm:px-6 text-center text-xs font-medium text-slate-300 uppercase tracking-wider">Free</th>
                            <th className="py-3 px-4 sm:px-6 text-center text-xs font-medium text-slate-300 uppercase tracking-wider">Pro</th>
                        </tr>
                    </thead>
                    <tbody className="divide-y divide-slate-700">
                        {[
                            { name: "Documents", free: "10", pro: "Unlimited" },
                            { name: "Messages per Document", free: "25", pro: "Unlimited" },
                            { name: "Monthly Price (Annual Billing)", free: "$0", pro: "$15" },
                            { name: "Monthly Price (Monthly Billing)", free: "$0", pro: "$18" },
                            { name: "Basic Support", free: <CheckCircle className="w-5 h-5 text-green-500 mx-auto" />, pro: <CheckCircle className="w-5 h-5 text-green-500 mx-auto" /> },
                            { name: "Priority Support", free: <XCircle className="w-5 h-5 text-red-500 mx-auto" />, pro: <CheckCircle className="w-5 h-5 text-green-500 mx-auto" /> },
                            { name: "All Pro Features", free: <XCircle className="w-5 h-5 text-red-500 mx-auto" />, pro: <CheckCircle className="w-5 h-5 text-green-500 mx-auto" /> },
                        ].map((feature, index) => (
                            <tr key={index} className="hover:bg-slate-700/30 transition-colors duration-150">
                                <td className="py-4 px-4 sm:px-6 text-sm text-slate-200">{feature.name}</td>
                                <td className="py-4 px-4 sm:px-6 text-sm text-slate-300 text-center">{feature.free}</td>
                                <td className="py-4 px-4 sm:px-6 text-sm text-slate-300 text-center">{feature.pro}</td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>
        </div>


        {/* Call to action for Stripe Portal (after user is subscribed) */}
        {/*
        <div className="mt-12 text-center">
          <p className="text-slate-400">Already a subscriber?</p>
          <button
            onClick={() => {
              // This would call your backend to create a Stripe Customer Portal session
              // and redirect the user to manage their subscription.
              // e.g., fetch('/api/customer-portal').then(res => res.json()).then(data => window.location.href = data.url);
              alert('Implement Stripe Customer Portal redirect here.');
            }}
            className="mt-2 text-indigo-400 hover:text-indigo-300 font-medium transition"
          >
            Manage your subscription
          </button>
        </div>
        */}

      </div>
    </section>
  );
};

export default PricingSection;

/*
How to use this component in your Next.js page (e.g., pages/index.js):

1. Save the code above as `components/PricingSection.js`.
2. Import it into your landing page file:
   import PricingSection from '../components/PricingSection';

3. Add it to your JSX, likely towards the bottom of your landing page:
   export default function HomePage() {
     return (
       <div>
         {/* ... other sections of your landing page ... *\/}
         <PricingSection />
         {/* ... footer or other content ... *\/}
       </div>
     );
   }

Stripe Integration Points:
- `handleSubscription(tier)`:
  - For the "Free" tier, you might redirect to a sign-up page or trigger a modal.
  - For the "Paid" tier, this function should:
    1. Make a request to your Next.js API backend.
    2. Your backend API route will use the Stripe Node.js library to:
       a. Create a Stripe Checkout Session for the selected plan (monthly or annual).
       b. This involves creating or retrieving Stripe Product and Price IDs that you've set up in your Stripe Dashboard.
       c. Redirect the user to the Stripe Checkout page.
- Stripe Webhooks: You'll need to set up webhooks to listen for events from Stripe (e.g., `checkout.session.completed`, `invoice.paid`) to provision access to your app's features based on the subscription status.
- Customer Portal: Consider adding a link to the Stripe Customer Portal (as commented out in the code) so users can manage their subscriptions (upgrade, downgrade, cancel, update payment methods). Your backend would create a portal session for this.

Remember to replace placeholder Price IDs and Product IDs with your actual Stripe data.
You'll need to create two Products in Stripe:
1. Your App - Free Tier (no price attached, or a $0 price)
2. Your App - Pro Tier

For the "Pro Tier" Product, you'll create two Prices:
1. $15/month, recurring interval: year
2. $18/month, recurring interval: month

Make sure to install lucide-react if you haven't already:
`npm install lucide-react` or `yarn add lucide-react`
*/
