@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Google Font Import --- */
@import url('https://fonts.googleapis.com/css2?family=Newsreader:opsz,wght@6..72,400;6..72,700&display=swap');

/* --- CSS Variables from prds/globals.txt --- */
:root {
  /* Light theme - Updated with light mode equivalents */
  --foreground-rgb: 0, 0, 0;
  --background-rgb: 246, 248, 250;  /* Cloud Mist #F6F8FA */
  --primary-color: #E5B679; /* Sunkissed Brass */
  --secondary-color: #E5B679; /* Sunkissed Brass */
  --accent-color: #FAD89D; /* Golden Sand */
  --text-color: #0F1317; /* Midnight Slate - for contrast */
  --muted-text-color: #3F4F60; /* Moonlit Azure - for readable muted text */
  --title-color: #0F1317; /* Midnight Slate - for contrast */
  --border-color: #96A2B4; /* Blue Pearl */
  --header-bg: #D9DDE2; /* Silver Fog */
  --editor-bg: #F6F8FA; /* Cloud Mist */
  --title-hover-color: #FAD89D; /* Golden Sand */
  --left-pane-bg: #F6F8FA; /* Cloud Mist */
  --toggle-button-bg: #D9DDE2; /* Silver Fog */
  --tab-active-bg: #D9DDE2; /* Silver Fog */
  --tab-active-border: #E5B679; /* Sunkissed Brass */
  --text-color-secondary: #96A2B4; /* Blue Pearl */
  --bg-color: #F6F8FA; /* Cloud Mist */
  --hover-bg: #D9DDE2; /* Silver Fog */
  --active-bg: #96A2B4; /* Blue Pearl */
  --input-bg: #FFFFFF; /* Keep white for inputs */
  --accent-color-light: rgba(229, 182, 121, 0.15); /* Sunkissed Brass with transparency */
  --accent-color-hover: #FAD89D; /* Golden Sand */
  --message-bg: #FFFFFF; /* White for message bubbles */
  --card-bg: #FFFFFF; /* White for cards */
  --disabled-bg: #D9DDE2; /* Silver Fog */
  --success-bg: #ecfdf5; /* Keep existing */
  --success-text: #047857; /* Keep existing */
  --error-bg: #fef2f2; /* Keep existing */
  --error-text: #b91c1c; /* Keep existing */
  /* Additional file explorer variables */
  --bg-secondary: #F6F8FA; /* Cloud Mist */
  --bg-secondary-light: #D9DDE2; /* Silver Fog */
  --text-primary: #0F1317; /* Midnight Slate - for contrast */
  --text-secondary: #3F4F60; /* Moonlit Azure - for readable secondary text */
  --primary-color-10: rgba(229, 182, 121, 0.1); /* Sunkissed Brass with transparency */
  --danger-color: #ef4444; /* Keep existing */
  --danger-color-10: rgba(239, 68, 68, 0.1); /* Keep existing */
  --success-color: #22c55e; /* Keep existing */
  --info-color: #FAD89D; /* Golden Sand */
  --primary-color-dark: #B38A58; /* Wheat Bronze */
  /* NEW Info Notification Colors */
  --info-bg: #FEF6E7; /* Light Yellow/Orange */
  --info-text: #C77A0A; /* Dark Orange/Brown */
  --info-border: #FAD89D; /* Golden Sand */
  /* Shadow variables */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.35);
  --overlay-bg: rgba(0, 0, 0, 0.8);
  --code-bg: #f8f9fa; /* Light gray background for code blocks */
}

[data-theme='dark'] {
  /* Dark theme - Based on the new color palette */
  --foreground-rgb: 255, 255, 255;
  --background-rgb: 15, 19, 23;  /* Midnight Slate #0F1317 */
  --primary-color: #C79553;  /* Ember Gold */
  --secondary-color: #C79553; /* Ember Gold */
  --title-color: #E5B679; /* White */
  --accent-color: #F1C37D; /* Luminous Amber */
  --text-color: #FFFFFF; /* White */
  --muted-text-color: #A8ADB4; /* Keeping Frost Gray for readability */
  --border-color: #3F4F60; /* Moonlit Azure */
  --header-bg: #2B3137; /* Steel Ash */
  --editor-bg: #0F1317; /* Midnight Slate */
  --title-hover-color: #F1C37D; /* Luminous Amber */
  --left-pane-bg: #0F1317; /* Midnight Slate */
  --toggle-button-bg: #2B3137; /* Steel Ash */
  --tab-active-bg: #2B3137; /* Steel Ash */
  --tab-active-border: #C79553; /* Ember Gold */
  --text-color-secondary: #8C6638; /* Burnished Bronze */
  --bg-color: #0F1317; /* Midnight Slate */
  --hover-bg: #2B3137; /* Steel Ash */
  --active-bg: #3F4F60; /* Moonlit Azure */
  --input-bg: #2B3137; /* Steel Ash */
  --accent-color-light: rgba(199, 149, 83, 0.15); /* Ember Gold with transparency */
  --accent-color-hover: #F1C37D; /* Luminous Amber */
  --message-bg: #2B3137; /* Steel Ash */
  --card-bg: #2B3137; /* Steel Ash */
  --disabled-bg: #3F4F60; /* Moonlit Azure */
  --success-bg: #064e3b; /* Keep existing */
  --success-text: #d1fae5; /* Keep existing */
  --error-bg: #7f1d1d; /* Keep existing */
  --error-text: #fee2e2; /* Keep existing */
  /* Additional file explorer variables */
  --bg-secondary: #0F1317; /* Midnight Slate */
  --bg-secondary-light: #2B3137; /* Steel Ash */
  --text-primary: #FFFFFF; /* White */
  --text-secondary: #A8ADB4; /* Keeping Frost Gray */
  --primary-color-10: rgba(199, 149, 83, 0.1); /* Ember Gold with transparency */
  --danger-color: #f87171; /* Keep existing */
  --danger-color-10: rgba(248, 113, 113, 0.1); /* Keep existing */
  --success-color: #4ade80; /* Keep existing */
  --info-color: #F1C37D; /* Luminous Amber */
  --primary-color-dark: #8C6638; /* Burnished Bronze */
  /* NEW Info Notification Colors */
  --info-bg: #4D381A; /* Dark Amber/Brown */
  --info-text: #F1C37D; /* Luminous Amber */
  --info-border: #F1C37D; /* Luminous Amber */
  /* Shadow variables */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.25);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.25);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.35);
  --overlay-bg: rgba(0, 0, 0, 0.8);
  --code-bg: var(--input-bg); /* Use input background for code blocks in dark mode */
}
/* --- End CSS Variables --- */

@font-face {
  font-family: "uncut sans";
  src: url("/uncut-sans.woff2") format("woff2");
}

@font-face {
  font-family: "geist mono";
  src: url("/geist-mono.woff2") format("woff2");
}

/* --- Base Styles from prds/globals.txt --- */
* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  font-family: "uncut sans", sans-serif;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
  transition: background 0.3s ease, color 0.3s ease;
  line-height: 1.5;
}

body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
  transition: background 0.3s ease, color 0.3s ease;
}

h1, h2, h3, h4, h5, h6 {
  font-weight: 600;
  color: var(--text-color);
  margin-bottom: 0.5rem;
  line-height: 1.2;
}

h1 {
  font-size: 1.875rem; /* Tailwind text-3xl */
}

h2 {
  font-size: 1.5rem; /* Tailwind text-2xl */
}

h3 {
  font-size: 1.25rem; /* Tailwind text-xl */
}

p {
  margin-bottom: 1rem;
  color: var(--text-color);
}

/* Selection highlight styles */
::selection {
  background-color: #C79553;
  color: white;
}

[data-theme='dark'] ::selection {
  background-color: #C79553;
  color: white;
}
/* --- End Base Styles --- */

code,
pre {
  font-family: "geist mono", monospace;
}

@media (prefers-color-scheme: dark) {
  :root {
    /* Note: Dark theme variables are handled by [data-theme='dark'] above */
    /* --foreground-rgb: 255, 255, 255; */
    --background-start-rgb: 0, 0, 0;
    --background-end-rgb: 0, 0, 0;
  }
}

body {
  /* Background is now controlled by the :root/body base styles */
}

/* Add your custom component styles here */
@layer components {
  .model-select {
    /*
     You can use @apply to include Tailwind utilities.
     Example: add padding, border, and rounded corners
    */
    @apply px-4 py-2 border border-[--border-color] rounded-md bg-[--input-bg] text-[--text-color];

    /*
     Or you can write regular CSS properties if needed.
     Example: set a specific font size or background color not easily
     achieved with utilities, or style pseudo-elements like ::before/::after.
    */
    font-size: 1rem;
    /* Add more styles as needed */
  }

  /*
   You might also need styles for child elements
   or states like :focus, :hover etc.
  */
  .model-select:focus {
    @apply outline-none ring-2 ring-[--primary-color] border-[--primary-color];
  }

  /* If your model-select has specific internal elements, style them too */
  .model-select option {
    /* Styles for the options within the select */
    @apply bg-[--input-bg] text-[--text-color];
  }

  /* --- Translated Components from prds/globals.txt --- */
  .btn-primary {
    @apply bg-[--primary-color] text-white border-none px-4 py-2 rounded-[0.375rem] font-medium cursor-pointer transition-colors duration-200 ease-in-out;
  }
  .btn-primary:hover {
    @apply bg-[--accent-color-hover];
  }

  .editor-container {
    @apply relative h-full max-w-full m-0 pt-2 px-0 bg-[--editor-bg] rounded-none shadow-none overflow-auto min-h-[400px];
    /* padding: 0.5rem 0rem 0rem; (Handled by pt-2 px-0) */
    /* min-height: 400px; (Done via min-h-[400px]) */
  }
  /* --- End Translated Components --- */

  /* Dark mode styles */
  /* Note: Dark mode for components using CSS variables should work automatically */
  /* Keeping this media query block if needed for non-variable overrides */
  @media (prefers-color-scheme: dark) {
    .model-select {
      /* Dark mode variables are already applied via [data-theme='dark'] */
      /* @apply border-gray-700;  */
      /* background-color: #333; */
      /* color: white; */
    }
  }

  /* --- Header styles from prds/globals.txt --- */
  .app-header { /* Renamed from header to avoid conflict */
    @apply flex justify-between items-center h-[48px] p-0 bg-[--header-bg] border-b border-solid border-[--border-color] transition-colors duration-300 ease-in-out;
    /* Slimmer height than original screenshot */
  }

  .header-content {
    @apply flex justify-between items-center w-full px-4 h-[48px]; /* Adjusted height and padding */
  }

  .header-logo {
    @apply text-[1.5rem] font-bold text-[--text-color];
    font-family: 'Newsreader', serif; /* Apply Newsreader font */
  }

  .header-actions {
    @apply flex items-center gap-4 justify-self-end mr-5;
  }

  .theme-toggle {
    @apply bg-none border-none text-[--text-color] cursor-pointer p-2 flex items-center justify-center rounded-full transition-colors duration-300 ease-in-out;
  }

  .theme-toggle:hover {
    background-color: rgba(var(--foreground-rgb), 0.1);
  }

  .sign-out-button {
    @apply px-2 py-[0.3rem] bg-transparent text-[--text-color] border border-solid border-[--border-color] rounded text-[0.9rem] cursor-pointer transition-all duration-200 ease-in-out;
    /* Adjusted padding for slimmer look */
  }

  .sign-out-button:hover {
    @apply bg-[--hover-bg] border-[--text-color-secondary];
  }
  /* --- End Header styles --- */
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* --- BlockNote Editor Custom Styles --- */
.bn-container {
  min-width: 100%;
  overflow-x: auto !important;
  max-width: 100% !important;
  height: 100%;
  padding-left: 0;
  padding-right: 0;
}

.bn-editor {
  min-width: 100%;
  /* overflow-x: auto !important; */
  height: 100%;
}

/* Handle text content in editor */
.bn-container p {
  white-space: pre-wrap !important;
  overflow-wrap: break-word;
  word-break: break-word;
}

/* Handle code blocks in editor */
.bn-block [data-content-type="codeBlock"] {
  overflow-x: hidden; /* Prevent horizontal scroll */
  max-width: 100%; /* Ensure it doesn't exceed container */
  min-width: auto; /* Allow shrinking */
}

/* Dark mode specific styles for BlockNote editor */
[data-theme='dark'] .bn-container {
  background-color: var(--editor-bg) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .bn-editor {
  background-color: var(--editor-bg) !important;
}

/* Ensure all BlockNote internal elements match dark theme */
[data-theme='dark'] .bn-container [contenteditable=true] {
  background-color: var(--editor-bg) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] .bn-container [data-content-type="root"] {
  background-color: var(--editor-bg) !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
}

/* Style the toolbar and its components in dark mode */
[data-theme='dark'] .bn-container [role="toolbar"],
[data-theme='dark'] .bn-container [data-toolbar="true"] {
  background-color: var(--header-bg) !important;
  border-color: var(--border-color) !important;
}

/* Style all buttons and controls in the editor for dark mode */
[data-theme='dark'] .bn-container button,
[data-theme='dark'] .bn-container .bn-toolbar-item {
  color: var(--text-color) !important;
  background-color: transparent !important;
}

[data-theme='dark'] .bn-container button:hover,
[data-theme='dark'] .bn-container .bn-toolbar-item:hover {
  background-color: var(--hover-bg) !important;
}

[data-theme='dark'] .bn-container button.active,
[data-theme='dark'] .bn-container .bn-toolbar-item.active {
  background-color: var(--active-bg) !important;
}

/* Style dropdowns and menus in dark mode */
[data-theme='dark'] .bn-container [role="menu"],
[data-theme='dark'] .bn-container [role="listbox"],
[data-theme='dark'] .bn-container [data-dropdown="true"] {
  background-color: var(--card-bg) !important;
  border-color: var(--border-color) !important;
  color: var(--text-color) !important;
  box-shadow: var(--shadow-md) !important;
}

[data-theme='dark'] .bn-container [role="menuitem"],
[data-theme='dark'] .bn-container [role="option"] {
  color: var(--text-color) !important;
}

[data-theme='dark'] .bn-container [role="menuitem"]:hover,
[data-theme='dark'] .bn-container [role="option"]:hover {
  background-color: var(--hover-bg) !important;
}

/* Style code blocks in dark mode */
[data-theme='dark'] .bn-container pre,
[data-theme='dark'] .bn-container code,
[data-theme='dark'] .bn-container [data-content-type="code"] {
  background-color: var(--active-bg) !important; /* Consistent code background */
  border-color: var(--border-color) !important;
  color: var(--text-color) !important;
}

/* Make first level elements in editor align with title */
.bn-container [data-content-type="root"] > [data-content-type] {
  margin-left: 0;
  margin-right: 0;
}

/* Ensure the block elements align properly */
.bn-block {
  margin-left: 0;
  margin-right: 0;
}
/* --- End BlockNote Styles --- */

/* --- Custom Scrollbar Styling --- */
/* (Already present in prds/globals.txt, might need merging or decision if needed here) */
/*
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-color);
}

::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-color-secondary);
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--border-color) var(--bg-color);
}
*/
/* --- End Scrollbar Styling --- */

/* --- Cubone File Manager Dark Mode Overrides --- */
[data-theme='dark'] main.file-explorer {
  background-color: var(--bg-color) !important;
  color: var(--text-color) !important;
  border-color: var(--border-color) !important; /* Adjust if file-explorer has a border */
}

[data-theme='dark'] .fm-toolbar { /* Target the inner toolbar div */
  background-color: var(--header-bg) !important;
  border-bottom: 1px solid var(--border-color) !important;
}

[data-theme='dark'] .fm-toolbar button.item-action {
  background-color: transparent !important; /* Make toolbar buttons transparent */
  color: var(--text-color) !important;
  border: none !important; /* Remove default border? */
}
[data-theme='dark'] .fm-toolbar button.item-action:hover {
  background-color: var(--hover-bg) !important;
}
[data-theme='dark'] .fm-toolbar button.item-action svg {
   color: var(--text-color) !important; /* Ensure icons inherit text color */
}

/* Primary Button Styling (If Needed - Check if Cubone adds a specific class like 'primary') */
/* [data-theme='dark'] .fm-toolbar button.item-action.primary { ... } */

[data-theme='dark'] section.files-container {
  /* Should inherit background from file-explorer */
}

[data-theme='dark'] div.navigation-pane {
   background-color: var(--bg-secondary) !important; /* Slightly different background for contrast? */
   border-right: 1px solid var(--border-color) !important;
}
[data-theme='dark'] div.navigation-pane .empty-nav-pane {
   color: var(--muted-text-color) !important;
}

[data-theme='dark'] div.folders-preview { /* THIS is likely the main content background */
  background-color: var(--bg-color) !important;
  color: var(--text-color) !important;
}

[data-theme='dark'] div.files.grid, /* Container for file items */
[data-theme='dark'] div.files.list {
  /* Should inherit background from folders-preview */
}

[data-theme='dark'] .bread-crumb-container,
[data-theme='dark'] .breadcrumb span {
   color: var(--muted-text-color) !important; /* Adjust breadcrumb text color */
}
[data-theme='dark'] .breadcrumb span svg {
   fill: var(--muted-text-color) !important;
}

[data-theme='dark'] .file-item-container { /* Individual item wrapper */
  /* Reset background/color in case of specificity issues */
  background-color: transparent !important;
  color: var(--text-color) !important;
  border: 1px solid transparent !important; /* Add border for selection later */
}

[data-theme='dark'] .file-item-container:hover {
  background-color: var(--hover-bg) !important;
}

[data-theme='dark'] .file-item-container.selected { /* Assuming .selected class for selection */
  background-color: var(--active-bg) !important;
  border: 1px solid var(--primary-color) !important;
}

[data-theme='dark'] .file-item-container .file-name {
  color: var(--text-color) !important;
}

[data-theme='dark'] .file-item-container svg { /* File/Folder Icons */
   color: var(--text-color-secondary) !important; /* Use secondary text color for icons */
}

/* Inputs (e.g., rename) - Need to inspect element if renaming adds an input */
/* [data-theme='dark'] .some-input-class { ... } */

/* Checkboxes */
[data-theme='dark'] input.fm-checkbox {
   /* Style checkbox if needed, might be difficult depending on browser */
   accent-color: var(--primary-color);
}

/* Resize Handle */
[data-theme='dark'] .sidebar-resize {
   background-color: var(--border-color) !important;
}

/* Context Menu */
[data-theme='dark'] .fm-context-menu {
   background-color: var(--card-bg) !important;
   border: 1px solid var(--border-color) !important;
   box-shadow: var(--shadow-md) !important;
}

[data-theme='dark'] .fm-context-menu .file-context-menu-list ul li {
   color: var(--text-color) !important;
   background-color: transparent !important;
}

[data-theme='dark'] .fm-context-menu .file-context-menu-list ul li:hover {
   background-color: var(--hover-bg) !important;
}

[data-theme='dark'] .fm-context-menu .file-context-menu-list ul li svg {
   color: var(--text-color-secondary) !important;
}

[data-theme='dark'] .fm-context-menu .file-context-menu-list ul li:hover svg {
   color: var(--text-color) !important;
}

[data-theme='dark'] .fm-context-menu .divider {
   border-top: 1px solid var(--border-color) !important;
}
/* --- End Cubone File Manager Overrides --- */